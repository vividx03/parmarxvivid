<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivid Academy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>.hidden { display: none; }</style>
</head>
<body class="bg-gray-100 font-sans">
    <nav class="bg-blue-600 p-4 text-white shadow-lg"><h1 class="text-2xl font-bold text-center">Vivid Academy</h1></nav>
    <div class="container mx-auto p-4">
        <div id="course-list" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8"></div>
        <div id="subject-section" class="hidden">
            <button onclick="showCourses()" class="text-blue-600 mb-4 font-bold">← Back</button>
            <h2 id="selected-course-name" class="text-xl font-bold mb-4"></h2>
            <div id="subject-list" class="grid grid-cols-2 gap-4"></div>
        </div>
        <div id="content-section" class="hidden">
            <button onclick="showSubjects()" class="text-blue-600 mb-4 font-bold">← Back</button>
            <h2 id="selected-subject-name" class="text-xl font-bold mb-4"></h2>
            <div id="chapter-list" class="space-y-4"></div>
        </div>
    </div>
    <script>
        let mainData = null;
        fetch('db.json').then(res => res.json()).then(data => { mainData = data; renderCourses(); }).catch(err => console.error("Error:", err));
        function renderCourses() {
            const list = document.getElementById('course-list');
            list.innerHTML = '';
            mainData.courses.forEach((c, i) => {
                list.innerHTML += `<div onclick="selectCourse(${i})" class="bg-white p-6 rounded shadow cursor-pointer hover:shadow-md transition"><h3 class="text-lg font-bold text-blue-800">${c.name}</h3></div>`;
            });
            document.getElementById('course-list').classList.remove('hidden');
            document.getElementById('subject-section').classList.add('hidden');
            document.getElementById('content-section').classList.add('hidden');
        }
        function selectCourse(i) {
            const c = mainData.courses[i];
            document.getElementById('selected-course-name').innerText = c.name;
            const list = document.getElementById('subject-list');
            list.innerHTML = '';
            c.subjects.forEach((s, si) => {
                list.innerHTML += `<div onclick="selectSubject(${i}, ${si})" class="bg-white p-4 rounded shadow cursor-pointer text-center hover:bg-gray-50"><p class="font-semibold">${s.name}</p></div>`;
            });
            document.getElementById('course-list').classList.add('hidden');
            document.getElementById('subject-section').classList.remove('hidden');
        }
        function selectSubject(ci, si) {
            const s = mainData.courses[ci].subjects[si];
            document.getElementById('selected-subject-name').innerText = s.name;
            const list = document.getElementById('chapter-list');
            list.innerHTML = '';
            s.chapters.forEach(ch => {
                list.innerHTML += `<div class="bg-white p-4 rounded shadow flex justify-between items-center">
                    <h4 class="font-bold">${ch.title}</h4>
                    <a href="${ch.url}" target="_blank" class="bg-red-500 text-white px-3 py-1 rounded text-sm">Watch</a>
                </div>`;
            });
            document.getElementById('subject-section').classList.add('hidden');
            document.getElementById('content-section').classList.remove('hidden');
        }
        function showCourses() { renderCourses(); }
        function showSubjects() { document.getElementById('content-section').classList.add('hidden'); document.getElementById('subject-section').classList.remove('hidden'); }
    </script>
</body>
</html>
