<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivid Academy Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #1a1c23; color: #e5e7eb; }
        .glass-card { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); }
        .hidden { display: none; }
    </style>
</head>
<body class="min-h-screen">
    <header class="p-6 border-b border-gray-800 bg-[#1f2937] text-center">
        <h1 class="text-2xl font-bold text-yellow-500 uppercase tracking-widest">Vivid Academy</h1>
    </header>
    <div class="container mx-auto p-4 max-w-2xl">
        <h2 id="view-title" class="text-center text-xl font-bold my-6 text-white uppercase tracking-widest"></h2>
        <div id="course-list" class="space-y-4"></div>
        <div id="subject-section" class="hidden space-y-4">
            <div id="subject-list" class="space-y-4"></div>
            <button onclick="renderCourses()" class="w-full mt-4 p-3 bg-gray-700 rounded-lg font-bold">BACK TO COURSES</button>
        </div>
        <div id="content-section" class="hidden space-y-4">
            <div id="chapter-list"></div>
            <button onclick="showSubjects()" class="w-full mt-4 p-3 bg-gray-700 rounded-lg font-bold">BACK TO SUBJECTS</button>
        </div>
    </div>
    <script>
        let mainData = null;
        let currentCourseIdx = null;
        function loadData() {
            fetch('db.json?v=' + Date.now()).then(res => res.json()).then(data => { 
                mainData = data; 
                renderCourses(); 
            });
        }
        function renderCourses() {
            document.getElementById('view-title').innerText = "COURSES";
            const list = document.getElementById('course-list');
            list.innerHTML = '';
            mainData.courses.forEach((c, i) => {
                list.innerHTML += `<div onclick="selectCourse(${i})" class="glass-card p-5 rounded-xl border-2 border-yellow-500/50 text-yellow-500 font-bold text-center cursor-pointer hover:bg-yellow-500/10 transition">${c.name}</div>`;
            });
            toggle('course-list');
        }
        function selectCourse(i) {
            currentCourseIdx = i;
            document.getElementById('view-title').innerText = "SUBJECTS";
            const list = document.getElementById('subject-list');
            list.innerHTML = '';
            mainData.courses[i].subjects.forEach((s, si) => {
                list.innerHTML += `<div onclick="selectSubject(${si})" class="glass-card p-4 rounded-lg border border-gray-700 flex justify-between cursor-pointer hover:bg-gray-800 uppercase font-semibold"><span>${s.name}</span><i class="fas fa-chevron-right text-yellow-500"></i></div>`;
            });
            toggle('subject-section');
        }
        function selectSubject(si) {
            const s = mainData.courses[currentCourseIdx].subjects[si];
            document.getElementById('view-title').innerText = s.name;
            const list = document.getElementById('chapter-list');
            list.innerHTML = '';
            s.chapters.forEach(ch => {
                list.innerHTML += `
                    <div class="glass-card p-5 rounded-xl mb-4 border-l-4 border-yellow-500 bg-gray-800/40">
                        <h4 class="font-bold mb-4 text-white uppercase text-sm tracking-tight">${ch.title}</h4>
                        <div class="grid grid-cols-2 gap-2 text-[10px] font-bold">
                            <a href="${ch.url}" target="_blank" class="bg-red-600 p-2 rounded text-center shadow-lg hover:scale-105 transition"><i class="fab fa-youtube mr-1"></i>LECTURE</a>
                            ${ch.notes_en ? `<a href="${ch.notes_en}" target="_blank" class="bg-blue-600 p-2 rounded text-center"><i class="fas fa-file-pdf mr-1"></i>ENG NOTES</a>` : ''}
                            ${ch.notes_hi ? `<a href="${ch.notes_hi}" target="_blank" class="bg-orange-600 p-2 rounded text-center"><i class="fas fa-file-pdf mr-1"></i>HINDI NOTES</a>` : ''}
                            ${ch.quiz ? `<a href="${ch.quiz}" target="_blank" class="bg-purple-600 p-2 rounded text-center"><i class="fas fa-lightbulb mr-1"></i>QUIZ</a>` : ''}
                            ${ch.handwritten ? `<a href="${ch.handwritten}" target="_blank" class="bg-emerald-600 p-2 rounded text-center"><i class="fas fa-pen mr-1"></i>WRITTEN</a>` : ''}
                        </div>
                    </div>`;
            });
            toggle('content-section');
        }
        function toggle(id) {
            ['course-list', 'subject-section', 'content-section'].forEach(d => document.getElementById(d).classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
        }
        function showSubjects() { selectCourse(currentCourseIdx); }
        loadData();
    </script>
</body>
</html>
