<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivid Academy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>body { background-color: #1a1c23; color: #e5e7eb; } .glass { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); } .hidden { display: none; }</style>
</head>
<body class="min-h-screen">
    <header class="p-6 border-b border-gray-800 bg-[#1f2937] text-center"><h1 class="text-2xl font-bold text-yellow-500 uppercase">Vivid Academy</h1></header>
    <div class="container mx-auto p-4 max-w-2xl">
        <h2 id="view-title" class="text-center text-xl font-bold my-6 uppercase"></h2>
        <div id="course-list" class="space-y-4"></div>
        <div id="subject-section" class="hidden space-y-4"><div id="subject-list" class="space-y-4"></div><button onclick="renderCourses()" class="w-full mt-4 p-3 bg-gray-700 rounded-lg font-bold">BACK</button></div>
        <div id="category-section" class="hidden space-y-4"><div id="category-list" class="space-y-4"></div><button onclick="toggle('subject-section')" class="w-full mt-4 p-3 bg-gray-700 rounded-lg font-bold">BACK</button></div>
        <div id="content-section" class="hidden space-y-4"><div id="chapter-list"></div><button onclick="toggle('category-section')" class="w-full mt-4 p-3 bg-gray-700 rounded-lg font-bold">BACK</button></div>
    </div>
    <script>
        let mainData = null, curC = null, curS = null;
        function loadData() { fetch('db.json?v=' + Date.now()).then(res => res.json()).then(data => { mainData = data; renderCourses(); }); }
        function renderCourses() { document.getElementById('view-title').innerText = "COURSES"; const list = document.getElementById('course-list'); list.innerHTML = ''; mainData.courses.forEach((c, i) => { list.innerHTML += `<div onclick="selectCourse(${i})" class="glass p-5 rounded-xl border-2 border-yellow-500/50 text-yellow-500 font-bold text-center cursor-pointer uppercase">${c.name}</div>`; }); toggle('course-list'); }
        function selectCourse(i) { curC = i; document.getElementById('view-title').innerText = "SUBJECTS"; const list = document.getElementById('subject-list'); list.innerHTML = ''; mainData.courses[i].subjects.forEach((s, si) => { list.innerHTML += `<div onclick="showCategories(${si})" class="glass p-4 rounded-lg flex justify-between cursor-pointer uppercase font-semibold"><span>${s.name}</span><i class="fas fa-chevron-right text-yellow-500"></i></div>`; }); toggle('subject-section'); }
        function showCategories(si) { curS = si; document.getElementById('view-title').innerText = mainData.courses[curC].subjects[si].name; document.getElementById('category-list').innerHTML = `<div onclick="showItems('CHAPTERS')" class="glass p-5 rounded-xl border-l-4 border-blue-500 font-bold cursor-pointer">CHAPTERS</div><div onclick="showItems('WEEKLY TESTS')" class="glass p-5 rounded-xl border-l-4 border-green-500 font-bold cursor-pointer">WEEKLY TESTS</div>`; toggle('category-section'); }
        function showItems(type) { 
            const items = mainData.courses[curC].subjects[curS][type] || []; 
            document.getElementById('view-title').innerText = type; 
            const list = document.getElementById('chapter-list'); 
            list.innerHTML = items.length ? '' : '<p class="text-center text-gray-500">No content added yet.</p>'; 
            items.forEach(ch => { 
                list.innerHTML += `<div class="glass p-5 rounded-xl mb-4 border-l-4 border-yellow-500">
                    <h4 class="font-bold mb-4 text-white uppercase text-sm">${ch.title}</h4>
                    <div class="grid grid-cols-2 gap-2 text-[10px] font-bold">
                        <a href="${ch.url}" target="_blank" class="bg-red-600 p-2 rounded text-center">LECTURE</a>
                        ${ch.notes_en ? `<a href="${ch.notes_en}" target="_blank" class="bg-blue-600 p-2 rounded text-center">ENG NOTES</a>` : ''}
                        ${ch.notes_hi ? `<a href="${ch.notes_hi}" target="_blank" class="bg-orange-600 p-2 rounded text-center">HINDI NOTES</a>` : ''}
                        ${ch.quiz ? `<a href="${ch.quiz}" target="_blank" class="bg-purple-600 p-2 rounded text-center">QUIZ</a>` : ''}
                        ${ch.handwritten ? `<a href="${ch.handwritten}" target="_blank" class="bg-teal-600 p-2 rounded text-center">PPT/NOTES</a>` : ''}
                    </div>
                </div>`; 
            }); 
            toggle('content-section'); 
        }
        function toggle(id) { ['course-list', 'subject-section', 'category-section', 'content-section'].forEach(d => document.getElementById(d).classList.add('hidden')); document.getElementById(id).classList.remove('hidden'); }
        loadData();
    </script>
</body>
</html>
