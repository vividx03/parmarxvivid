<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivid Academy | Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: #1a1c23; color: #e5e7eb; }
        .glass-card { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); }
        .accent-border { border-left: 4px solid #facc15; }
        .hidden { display: none; }
        .btn-gradient { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); }
    </style>
</head>
<body class="min-h-screen">
    <header class="p-6 border-b border-gray-800 flex justify-between items-center bg-[#1f2937]">
        <h1 class="text-2xl font-bold text-yellow-500 tracking-wider">VIVID ACADEMY</h1>
        <i class="fas fa-user-circle text-2xl text-gray-400"></i>
    </header>

    <div class="container mx-auto p-4 max-w-2xl">
        <div id="section-head" class="text-center my-8">
            <h2 id="view-title" class="text-3xl font-extrabold text-white uppercase tracking-widest">COURSES</h2>
            <div class="h-1 w-20 bg-yellow-500 mx-auto mt-2"></div>
        </div>

        <div id="course-list" class="space-y-4"></div>

        <div id="subject-section" class="hidden">
            <div id="subject-list" class="space-y-4"></div>
            <button onclick="showCourses()" class="w-full mt-8 p-4 rounded-xl bg-gray-700 font-bold uppercase tracking-tighter">Back to Courses</button>
        </div>

        <div id="content-section" class="hidden">
            <div id="chapter-list" class="space-y-4"></div>
            <button onclick="showSubjects()" class="w-full mt-8 p-4 rounded-xl bg-gray-700 font-bold uppercase tracking-tighter">Back to Subjects</button>
        </div>
    </div>

    <script>
        let mainData = null;
        let currentCourseIdx = null;

        fetch('db.json').then(res => res.json()).then(data => { 
            mainData = data; 
            renderCourses(); 
        });

        function renderCourses() {
            document.getElementById('view-title').innerText = "COURSES";
            const list = document.getElementById('course-list');
            list.innerHTML = '';
            mainData.courses.forEach((c, i) => {
                list.innerHTML += `
                    <div onclick="selectCourse(${i})" class="glass-card p-6 rounded-2xl flex justify-between items-center cursor-pointer border-2 border-yellow-500/30 hover:border-yellow-500 transition-all">
                        <span class="text-xl font-bold uppercase text-yellow-400">${c.name}</span>
                        <i class="fas fa-chevron-right text-yellow-500"></i>
                    </div>`;
            });
            toggleSections('course-list');
        }

        function selectCourse(i) {
            currentCourseIdx = i;
            document.getElementById('view-title').innerText = "SUBJECTS";
            const list = document.getElementById('subject-list');
            list.innerHTML = '';
            mainData.courses[i].subjects.forEach((s, si) => {
                list.innerHTML += `
                    <div onclick="selectSubject(${si})" class="glass-card p-5 rounded-xl border border-gray-700 flex justify-between items-center cursor-pointer hover:bg-gray-800">
                        <span class="font-semibold text-gray-200">${s.name}</span>
                        <i class="fas fa-book-open text-blue-400"></i>
                    </div>`;
            });
            toggleSections('subject-section');
        }

        function selectSubject(si) {
            const s = mainData.courses[currentCourseIdx].subjects[si];
            document.getElementById('view-title').innerText = s.name.toUpperCase();
            const list = document.getElementById('chapter-list');
            list.innerHTML = '';
            s.chapters.forEach(ch => {
                list.innerHTML += `
                    <div class="glass-card p-5 rounded-2xl accent-border mb-4">
                        <h4 class="font-bold text-lg text-white mb-4">${ch.title}</h4>
                        <div class="grid grid-cols-2 gap-3">
                            <a href="${ch.url}" target="_blank" class="btn-gradient p-3 rounded-lg text-center font-bold text-sm shadow-lg"><i class="fab fa-youtube mr-2"></i>LECTURE</a>
                            ${ch.notes_en ? `<a href="${ch.notes_en}" class="bg-emerald-600 p-3 rounded-lg text-center font-bold text-sm shadow-lg"><i class="fas fa-file-pdf mr-2"></i>NOTES</a>` : ''}
                        </div>
                    </div>`;
            });
            toggleSections('content-section');
        }

        function toggleSections(id) {
            ['course-list', 'subject-section', 'content-section'].forEach(sec => {
                document.getElementById(sec).classList.add('hidden');
            });
            document.getElementById(id).classList.remove('hidden');
        }

        function showCourses() { renderCourses(); }
        function showSubjects() { selectCourse(currentCourseIdx); }
    </script>
</body>
</html>
